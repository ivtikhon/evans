---
#
#    0 | 1 | 2
#    3 | 4 | 5
#    6 | 7 | 8
#
classes:
  Grid:
    state:
      g1: ['X', 'O', 'empty']
      g2: ['X', 'O', 'empty']
      g3: ['X', 'O', 'empty']
      g4: ['X', 'O', 'empty']
      g5: ['X', 'O', 'empty']
      g6: ['X', 'O', 'empty']
      g7: ['X', 'O', 'empty']
      g8: ['X', 'O', 'empty']
      g9: ['X', 'O', 'empty']
      turn: ['X', 'O']
    predicates:
      firstRowX: g1 == 'X' and g2 == 'X' and g3 == 'X'
      secondRowX: g1 == 'X' and g2 == 'X' and g3 == 'X'
      thirdRowX: g1 == 'X' and g2 == 'X' and g3 == 'X'
      firstRowO: g1 == 'O' and g2 == 'O' and g3 == 'O'
      secondRowO: g1 == 'O' and g2 == 'O' and g3 == 'O'
      thirdRowO: g1 == 'O' and g2 == 'O' and g3 == 'O'
      firstColumnX: g1 == 'X' and g4 == 'X' and g7 == 'X'
      secondColumnX: g2 == 'X' and g5 == 'X' and g8 == 'X'
      thirdColumnX: g3 == 'X' and g6 == 'X' and g9 == 'X'
      firstColumnO: g1 == 'O' and g4 == 'O' and g7 == 'O'
      secondColumnO: g2 == 'O' and g5 == 'O' and g8 == 'O'
      thirdColumnO: g3 == 'O' and g6 == 'O' and g9 == 'O
      diagonalUpX: g7 == 'X' and g5 == 'X' and g3 == 'X'
      diagonalDownX: g1 == 'X' and g5 == 'X' and g9 == 'X'

  Player:
    state:
      designation: ['X', 'O']

main:
  vars:
    player1: Player
    player2: Player
    grid: Grid
  tasks:
    - code: |
        player1.state.designation: 'X'
        player1.state.designation: 'O'
    - auto:
        objects:
          - player1
          - player2
          - grid
        goal:
          - grid.g0 = 'X' or grid.g1 = 'X' or grid.g2 = 'X' or grid.g3 = 'X' or grid.g6 = 'X'
          - if: grid.g0 == 'X'
            then:
              - (grid.g3 = 'X' and grid.g6 = 'X') or (grid.g4 = 'X' and grid.g8 = 'X')
